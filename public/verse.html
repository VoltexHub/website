<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Random Verse</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f3f4f6;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .box {
    background: #fff;
    padding: 24px 32px;
    border-radius: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    max-width: 700px;
    width: 90%;
    text-align: center;
  }
  select, button {
    padding: 8px 12px;
    font-size: 1em;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  button {
    background: #2563eb;
    color: white;
    border: none;
    cursor: pointer;
  }
  button:hover { background: #1d4ed8; }
  .verse-text { font-size: 1.2em; line-height: 1.6; margin-top: 18px; }
  .verse-ref { font-weight: bold; margin-top: 10px; }
  .religion { margin-top: 8px; color: #6b7280; font-size: 0.9em; }
  .loading { color: #9ca3af; margin-top: 12px; }
  .input-row {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>
  <div class="box">
    <h1>Random Verse</h1>

    <div class="input-row">
      <select id="religionPicker">
        <option value="Christianity">Christianity (Bible)</option>
        <option value="Islam">Islam (Quran)</option>
      </select>
      <button id="fetchBtn">Get Verse</button>
    </div>

    <div id="loading" class="loading">Choose a religion and click "Get Verse".</div>
    <div id="verseText" class="verse-text"></div>
    <div id="verseRef" class="verse-ref"></div>
    <div id="religion" class="religion"></div>
  </div>

  <script>
    const picker = document.getElementById('religionPicker');
    const fetchBtn = document.getElementById('fetchBtn');
    const verseText = document.getElementById('verseText');
    const verseRef = document.getElementById('verseRef');
    const religion = document.getElementById('religion');
    const loading = document.getElementById('loading');

    const saved = localStorage.getItem('religionChoice');
    if (saved) picker.value = saved;

    fetchBtn.addEventListener('click', () => {
      const choice = picker.value;
      localStorage.setItem('religionChoice', choice);

      verseText.textContent = '';
      verseRef.textContent = '';
      religion.textContent = '';
      loading.textContent = 'Loading...';

      if (choice === "Christianity") {
        fetch('https://bible-api.com/data/web/random')
          .then(res => res.json())
          .then(data => {
            const v = data.random_verse;
            verseText.textContent = v.text;
            verseRef.textContent = `${v.book} ${v.chapter}:${v.verse}`;
            religion.textContent = 'Christianity';
            loading.textContent = '';
          })
          .catch(() => { loading.textContent = 'Failed to fetch Bible verse.'; });
      } else if (choice === "Islam") {
        fetch('https://api.alquran.cloud/v1/ayah/random')
          .then(res => res.json())
          .then(data => {
            const v = data.data;
            verseText.textContent = v.text;
            verseRef.textContent = `Surah ${v.surah.englishName} (${v.surah.number}):${v.numberInSurah}`;
            religion.textContent = 'Islam';
            loading.textContent = '';
          })
          .catch(() => { loading.textContent = 'Failed to fetch Quran ayah.'; });
      }
    });
  </script>
</body>
</html>
